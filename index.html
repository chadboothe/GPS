<!DOCTYPE html>
<html>
    <head>
        <script src="gps.min.js"></script>
        <script>
            var gps = new GPS;
            gps.update('...');
         </script>
    </head>
<body>

<h1>GPS</h1>
<input type="file" id="fileInput">
<br>
<button onclick="readFile()">Click me</button>

</body>

<script>
    //var GPS = require('gps');
    //var gps = new GPS;
    let sentences;

    const fileInput = document.getElementById('fileInput');

    fileInput.addEventListener('change', (event) => {

        const file = event.target.files[0];

        const reader = new FileReader();

        reader.onload = (event) => {
            const fileContent = event.target.result;
            sentences = fileContent.split('\n');
            //console.log(lines[0]);
        };

        reader.readAsText(file);

    });

    function readFile() {
        //var sentence = '$GPGGA,224900.000,4832.3762,N,00903.5393,E,1,04,7.8,498.6,M,48.0,M,,0000*5E';

        gps.on('data', function (parsed) {

            console.log(parsed);
        });

        gps.update(sentences[4]);
    }
</script>
</html>
